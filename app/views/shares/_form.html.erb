<script type="text/javascript" src="/javascripts/filebrowser.js" ></script>
<%= stylesheet_link_tag 'filebrowser.css' %>

<div id="dirwrap">
  <div id="controls"></div>
  <div id="directories"></div>
</div>

<div id="mcontent" class="mcontent">

<div>
  <br>
  <h2 class="mheading grey">
    Create new share
    <span style="float:right;"><a id="info" href="#"> ? </a></span>
  </h2>

  <% form_remote_for :share,
    :url => {:action => 'create'},
    :before => "$('#wait').show();",
    :html => {:id => "form_new"},
    :update => "shares",
    :after => "$('#wait').fadeOut(); $('div#newform').stop().animate({height: '-=300' }, 200);" do |form| %>

    <%= form.hidden_field :id %>

    <!-- Display some info here -->
    <div class="info" style="vertical-align:middle; background: -moz-linear-gradient(270deg, #FFFFF6, #FFFDE3) repeat scroll 0 0 transparent;
                    margin:10px 0px;    padding:10px 5px; border:2px solid grey; 
                    border-radius: 5px 5px 5px 5px; color: #666666;">
                    <span style="border-radius:100%; display:inline-block; 
                    width:28px; height:28px;  border:2px solid #507CA7; line-height:28px; font-size: 22px; font-weight:bold; color:#fff;
                    text-align:center;  text-shadow: 0px -1px 0 #000;
                    background: -moz-linear-gradient(center bottom , #2B78C6, #00A3D3) repeat scroll 0 0 transparent;">I</span>
                  <strong style="line-height:28px;">INFO BOX</strong></div>
    
    <div style=" border:2px solid grey; padding:10px 5px; border-radius: 5px 5px 5px 5px; ">
      <div class="line">
        <div class='key'> <%= form.label :name %> </div>
        <div class='value'>
          <%= form.text_field :name, :class=>"uppercase" %>
        </div>
      </div>

      <div class="line">
        <div class='key'> <%= form.label :path %> </div>
        
        <div class='value'>
          <%= form.text_field :path, :id=>"browser" %>
        </div>
      </div>
    </div>
    <% form.submit%>
  <% end %>
  </div>
</div>

<script>
  jQuery(document).ready(function() {
    var home = "<%= ENV['HOME'] %>"
    $('#newform').find('[type=checkbox].ftoggle').slider({background: "orange"});
    $('#browser').directory({parent: home}); 
  });
  
  $(function(){ 
    
  });
</script>

