<div class="grid_12">
  <div class="navigationHeader" style="">
    <div class="left navigation">
    <%= link_to_remote( 
       "<img src='/images/prev.png' class='small navImage' />PREV",
      :before => "$('#waitAnimation').show();",
      :loading => "$('#waitAnimation').fadeOut(500);",
      :update => "directoriesContainer",
      :html => {:class => "navLink left textLeft"},
      :url => {:action => 'browse', :dir => @prev })
    %>
    </div>
    
    <div class="center navigation textCentered">
      <p>HOME DIRECTORY "<%= @home %>"</p>
    </div>
    
    <div class="right navigation">
      <%= link_to_remote (
        "<img src='/images/home.png' class='small navImage' />HOME",
        :before => "$('#waitAnimation').show();",
        :loading => "$('#waitAnimation').fadeOut(500);",
        :update => "directoriesContainer",
        :html => {:class => "navLink textRight"},
        :url => {:action => 'browse', :dir => @home})
      %> 
    </div>
    <div class="clear"></div>
  </div>
</div>


<% @dirs.each do |n,h| %>
  <% path = h["path"] %>
    <div class="link grid_12">
    <div class="key">
      <% unless h["children"] == "yes" %>
        <a class="dirLine">
        <span class='name'><%= n.upcase%></span>
        <span class='path'><%= h["path"] %></span>
      </a>
    <% else %>
              <%= link_to_remote(
          "<span class='name'>#{n.upcase}</span><span class='path'>#{h["path"]}</span>",
            :loading => "$('#waitAnimation').show();",
            :after =>  "$('#waitAnimation').fadeOut(500);",
            :update => "directoriesContainer",
            :html => {:class => "dirLink"},
            :url => {:action => 'browse', :dir => path })
        %>
    <% end %>
    
    </div>
    
    <% unless @shared.include?(path) %>
      <div class="value textRight">
          <%= link_to_remote :SHARE,
          :before => "$('#waitAnimation').show();",
          :loading => "$('#waitAnimation').fadeOut(500);",
          :update => "directoriesContainer",
          :html => {:class => "shareDir greenBtn btn"},
          :url => {:action => 'create', "share[name]"=> n.upcase, "share[path]" => path }
        %> 
      </div>
   
    <% else %>
      <div class="value textRight">
          <%= link_to_remote :UNSHARE,
          :before => "$('#waitAnimation').show();",
          :loading => "$('#waitAnimation').fadeOut(500);",
          :update => "directoriesContainer",
          :html => {:class => "unshareDir blackBtn btn"},
          :url => {:action => 'destroy', "share[name]"=> n.upcase, "share[path]" => path }
        %> 
      </div>    
    <% end %>
  </div>
<% end %>

